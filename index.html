<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deloitte Dual-Use Challenge</title>
    <style>
        body { font-family: 'Open Sans', Arial, sans-serif; background-color: #000; color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; }
        #game-container { background: #111; width: 90%; max-width: 450px; padding: 30px; border-radius: 4px; border-top: 6px solid #86bc25; text-align: center; position: relative; z-index: 1; }
        .logo-outer { width: 100%; max-width: 160px; margin: 0 auto 25px auto; }
        #logo { width: 100%; height: auto; display: block; }
        .hidden { display: none !important; }
        input { width: 100%; padding: 12px; margin: 8px 0; background: #222; border: 1px solid #444; color: #fff; box-sizing: border-box; }
        button { width: 100%; padding: 15px; border: none; background: #86bc25; color: #000; font-weight: bold; cursor: pointer; margin-top: 15px; text-transform: uppercase; }
        .secondary-btn { background: #444; color: #fff; margin-top: 10px; font-size: 0.8rem; }
        #product-img { width: 100%; height: 250px; object-fit: contain; background: #000; margin-top: 10px; border: 1px solid #333; }
        .btn-box { display: flex; justify-content: space-between; margin-top: 10px; }
        
        /* Slider Overlay */
        #slider-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #slider-img { max-width: 100%; max-height: 90vh; object-fit: contain; }
        .close-slider { position: absolute; top: 20px; right: 20px; background: #86bc25; color: #000; padding: 10px 20px; font-weight: bold; cursor: pointer; border: none; }
    </style>
</head>
<body>

<div id="slider-overlay" class="hidden">
    <button class="close-slider" onclick="toggleSlider()">CLOSE [X]</button>
    <img src="images/oneslider.png" id="slider-img" alt="Information Slide">
</div>

<div id="game-container">
    <div class="logo-outer">
        <img src="images/logo2.png" alt="Deloitte Logo" id="logo">
    </div>

    <div id="reg-screen">
        <h2>Dual-Use Challenge</h2>
        <input type="text" id="reg-name" placeholder="Full Name">
        <input type="text" id="reg-company" placeholder="Company">
        <input type="text" id="reg-role" placeholder="Role">
        <input type="email" id="reg-email" placeholder="Email Address">
        <button id="main-start-btn">START GAME</button>
        <button class="secondary-btn" onclick="toggleSlider()">Show Info Slide</button>
        <p style="margin-top:15px;"><a href="leaderboard.html" style="color:#86bc25; text-decoration:none; font-size:0.8rem;">View Leaderboard</a></p>
    </div>

    <div id="game-content" class="hidden">
        <div style="display:flex; justify-content:space-between; color:#86bc25; font-family:monospace; font-weight:bold;">
            <div id="timer-display">Time: 60</div>
            <div id="score-display">Score: 0</div>
        </div>
        <img id="product-img" src="">
        <h3 id="product-name"></h3>
        <div class="btn-box">
            <button id="swipe-left" style="background:#444; color:#fff; width:48%">CONSUMER</button>
            <button id="swipe-right" style="width:48%">DUAL-USE</button>
        </div>
    </div>

    <div id="results-screen" class="hidden">
        <h2>Game Over</h2>
        <p id="final-stats"></p>
        <div id="loading-msg">Uploading score...</div>
        <button onclick="location.href='leaderboard.html'">See Global Rankings</button>
        <button class="secondary-btn" onclick="location.reload()">Play Again</button>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz0CZBIqFlmBkGIZoU6yVFDak_B4FhkqnvnEUl7ZILjOVWq9-5htipRMk_zeqWZ_ZOoyg/exec";

    const products = [
        { name: "GPS for Cars", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUIU05FOfL-VUxBLF8z2PxyB8zwnhwuRgJ5A&s", isDualUse: false },
        { name: "Carbon Fiber Roll", image: "https://m.media-amazon.com/images/I/81PsiYlPIVL._AC_UF894,1000_QL80_.jpg", isDualUse: true },
        { name: "Luxury Smartwatch", image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=500", isDualUse: false },
        { name: "Industrial Magnet", image: "https://www.cmtcompanies.com/wp-content/uploads/2017/01/57-DASH-magnet.jpg", isDualUse: true },
        { name: "Liquid Nitrogen Tank (Resistant Alloy)", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTA2Dd9blOb5taCLB5qW-FF6U_eVyg-JNnZvg&s", isDualUse: true },
        { name: "Satellite Phone", image: "https://www.officeeasy.be/media/catalog/product/cache/16822256cee3c919bf29bfc0144d0975/i/r/iridium_extreme.jpg", isDualUse: true },
        { name: "Instant Coffee", image: "https://images.unsplash.com/photo-1559056199-641a0ac8b55e?q=80&w=500", isDualUse: false },
        { name: "Laboratory Centrifuge", image: "https://m.media-amazon.com/images/I/61g+cYn2kyL._AC_UF894,1000_QL80_.jpg", isDualUse: true },
        { name: "Stainless Steel Pipe (High Spec)", image: "https://yenaengineering.nl/wp-content/uploads/2021/08/image.jpeg", isDualUse: true },
        { name: "Encryption Software", image: "https://images.unsplash.com/photo-1563986768609-322da13575f3?q=80&w=500", isDualUse: true },
        { name: "Industrial Fertilizer", image: "https://images.unsplash.com/photo-1628352081506-83c43123ed6d?q=80&w=500", isDualUse: false },
        { name: "Solar Panel", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaHUI-Bvr5LxlJcF-hgywBzy_7lj4EZ_fUrA&s", isDualUse: false },
        { name: "High-Performance GPU", image: "https://images.unsplash.com/photo-1591488320449-011701bb6704?q=80&w=500", isDualUse: true },
        { name: "Furbie Toy", image: "https://media-cldnry.s-nbcnews.com/image/upload/t_fit-560w,f_auto,q_auto:best/streams/2012/August/120806/347363-furby.jpg", isDualUse: false },
        { name: "Laser Cutting Machine", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSRT9RsSsxHUuk1vWWRjHB-pnRH0o6GBX0LyQ&s", isDualUse: true },
        { name: "Laptop Computer", image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?q=80&w=500", isDualUse: false },
        { name: "Maraging Steel Plate", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXsbdXgTyUmTXBOyhIVwzA_nm19OZXqF0PvA&s", isDualUse: true },
        { name: "Microwave Oven", image: "https://images.unsplash.com/photo-1574269909862-7e1d70bb8078?q=80&w=500", isDualUse: false },
        { name: "Aluminum Powder", image: "https://m.media-amazon.com/images/I/31nzZAXwywL._AC_UF1000,1000_QL80_.jpg", isDualUse: true },
        { name: "3D Printer", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRqxaGChmXB4lHNgCxOiI-vGLCWYIOOotsHBw&s", isDualUse: false },
        { name: "Submersible Pump", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTCd3SnUnK2N15maZwuwtbuqkMdhMDOEZqx8w&s", isDualUse: true },
        { name: "Glass Wool", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfoDE-SZKNUyH93ypfcE4pQ5aErVzadPHdQQ&s", isDualUse: false },
        { name: "Night Vision Goggles", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRNZOFZhwOGjZtPGdmkgVCALUTuwX1-nA9Cfw&s", isDualUse: true },
        { name: "Consumer Drone", image: "https://images.unsplash.com/photo-1507582020474-9a35b7d455d9?q=80&w=500", isDualUse: true },
        { name: "Diesel Generator", image: "https://www.auto-service.be/assets/media/29748/diesel-generator-geluidsgedempt-230v400v-10kva-3.jpg", isDualUse: false },
        { name: "Digital Oscilloscope", image: "https://be.farnell.com/productimages/large/en_GB/3228047-40.jpg", isDualUse: true },
        { name: "Nickel Alloy", image: "https://www.neonickel.com/wp-content/uploads/2023/10/Characteristics-Effects-of-Alloying-Elements.jpg", isDualUse: true },
        { name: "Fiber Optic Cable", image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=500", isDualUse: true },
        { name: "Vacuum Pump", image: "https://cbeuptime.com/wp-content/uploads/2015/03/industrial-vacuum-pump-compressor-picture-id1152748867.jpg", isDualUse: true },
        { name: "Titanium Rods", image: "https://m.media-amazon.com/images/I/71mI-+fS9EL._AC_UF1000,1000_QL80_.jpg", isDualUse: true },
        { name: "Industrial Smoke Detector", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSt-3Q2qHWY7wL9Lpx-pKXiXU92oXrqeEVXbw&s", isDualUse: false },
        { name: "Server Rack", image: "https://www.eziblank.com/wp-content/uploads/2023/08/serverracks-scaled.jpg", isDualUse: false },
        { name: "Microscope", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-XgSkqXloXilxRV2f_LfRXGnoe4v0U8mJAA&s", isDualUse: false },
        { name: "Pressure Sensor", image: "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcT8clzc3wjqRIAFMk9JussliDIsyJV5pVbuiyskyvstylO2b1NpAuTPWxtmgHDs0su9bGWl7HE13A3KpZGc8hdtR-Kg0v991njQgdtEO4YtfXNlV8vBzI4OrS_IGPhxpEpXvZMefA&usqp=CAc", isDualUse: true },
        { name: "High-Speed Camera", image: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?q=80&w=500", isDualUse: true },
        { name: "Ball Bearings", image: "https://m.media-amazon.com/images/I/61IqIz62s6L.jpg", isDualUse: true },
        { name: "Graphite Electrodes", image: "https://www.eastcarb.com/wp-content/uploads/2024/10/What-is-Graphite-Electrode.png", isDualUse: true },
        { name: "Thermal Imaging Camera", image: "https://m.media-amazon.com/images/I/61y5QhiHmSL._AC_UF1000,1000_QL80_.jpg", isDualUse: true },
        { name: "Scuba Regulator", image: "https://www.scuba.com/blog/wp-content/uploads/2023/11/scuba-diving-regulator-octo-AdobeStock_254364233.jpg", isDualUse: false },
        { name: "Microprocessor Chips", image: "https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=500", isDualUse: true },
        { name: "Industrial Robot Arm", image: "https://images.unsplash.com/photo-1535378917042-10a22c95931a?q=80&w=500", isDualUse: true },
        { name: "Dental Drill", image: "https://images.unsplash.com/photo-1598256989800-fe5f95da9787?q=80&w=500", isDualUse: false }
    ];

    let currentIndex = 0, score = 0, timeLeft = 60, timer, userData = {};

    function toggleSlider() {
        document.getElementById('slider-overlay').classList.toggle('hidden');
    }

    function startGame() {
        userData = {
            name: document.getElementById('reg-name').value,
            company: document.getElementById('reg-company').value,
            role: document.getElementById('reg-role').value,
            email: document.getElementById('reg-email').value
        };
        if(!userData.name || !userData.email) return alert("Name/Email required.");
        
        document.getElementById('reg-screen').classList.add('hidden');
        document.getElementById('game-content').classList.remove('hidden');
        
        currentIndex = 0; score = 0; timeLeft = 60;
        showProduct();
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer-display').innerText = `Time: ${timeLeft}`;
            if (timeLeft <= 0) endGame();
        }, 1000);
    }

    function showProduct() {
        if (currentIndex >= products.length) return endGame();
        document.getElementById('product-img').src = products[currentIndex].image;
        document.getElementById('product-name').innerText = products[currentIndex].name;
    }

    function handleGuess(guess) {
        if (guess === products[currentIndex].isDualUse) {
            score++;
        } else {
            score--; // Penalty: -1 for wrong answers
        }
        document.getElementById('score-display').innerText = `Score: ${score}`;
        currentIndex++;
        showProduct();
    }

    function endGame() {
        clearInterval(timer);
        document.getElementById('game-content').classList.add('hidden');
        document.getElementById('results-screen').classList.remove('hidden');
        document.getElementById('final-stats').innerText = `Final Score: ${score}`;
        fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ ...userData, score: score }) });
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('main-start-btn').addEventListener('click', startGame);
        document.getElementById('swipe-left').addEventListener('click', () => handleGuess(false));
        document.getElementById('swipe-right').addEventListener('click', () => handleGuess(true));
    });
</script>
</body>
</html>
